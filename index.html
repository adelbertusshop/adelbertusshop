
<script>
function renderProducts(category = 'all') {
  productsContainer.innerHTML = '';
  const filtered = category === 'all' ? products : products.filter(p => p.category === category);

  filtered.forEach(product => {
    const div = document.createElement('div');
    div.className = 'product';
    div.innerHTML = `
      <img src="${product.img}" alt="${product.name}" />
      <div class="product-name">${product.name}</div>
    `;
    div.onclick = () => openModal(product);
    productsContainer.appendChild(div);
  });
}

// Obsługa filtrów
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const category = btn.dataset.category;
    renderProducts(category);
  });
});

// Modal
const modal = document.getElementById('product-modal');
const modalImage = document.getElementById('modal-image');
const modalName = document.getElementById('modal-name');
const addToCartBtn = document.getElementById('add-to-cart-btn');
let currentProduct = null;

function openModal(product) {
  currentProduct = product;
  modalImage.src = product.img;
  modalName.textContent = product.name;
  modal.classList.add('show');
}

document.getElementById('modal-close').addEventListener('click', () => {
  modal.classList.remove('show');
});

// Koszyk
function updateCart() {
  cartItemsContainer.innerHTML = '';
  if (cart.length === 0) {
    cartItemsContainer.appendChild(cartEmptyMsg);
    return;
  }

  cart.forEach(item => {
    const li = document.createElement('li');
    li.textContent = `${item.name} (${item.color}, ${item.size})`;
    cartItemsContainer.appendChild(li);
  });
}

addToCartBtn.addEventListener('click', () => {
  const color = document.getElementById('color-select').value;
  const size = document.getElementById('size-select').value;
  cart.push({ name: currentProduct.name, color, size });
  updateCart();
  modal.classList.remove('show');
});

// Początkowe załadowanie
renderProducts();
</script>
</body>
</html>
