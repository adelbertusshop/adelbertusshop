<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koszyk</title>

<!-- PayPal â€“ staÅ‚e, Hosted Buttons -->
<script src="https://www.paypal.com/sdk/js?client-id=BAApXIlx_i9yxgPZvc4vuso00U8LSVbTZl57n3Pcfr0LfvppkHOPgUjsoN8-QLjxxH-Qb1DlbNOd-Pb2Z4&components=hosted-buttons&disable-funding=venmo&currency=PLN"></script>

<style>
  body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
  .koszyk { max-width: 600px; margin: 0 auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.2);}
  .paypal-btn { margin-top: 20px; }
  /* Ikona koszyka */
  #cartIcon {
    position: fixed; right: 20px; top: 20px;
    background:#ffcc00; color:#000; border-radius:50%;
    width:48px; height:48px; display:flex; align-items:center; justify-content:center;
    font-size:22px; cursor:pointer; box-shadow:0 6px 18px rgba(0,0,0,.25);
    z-index: 1000;
  }
  #cartIcon .count {
    position:absolute; bottom:-6px; right:-6px; background:#e53935; color:#fff;
    width:22px; height:22px; border-radius:50%; font-size:12px; display:flex; align-items:center; justify-content:center;
    box-shadow:0 2px 8px rgba(0,0,0,.25);
  }
  /* Panel koszyka */
  #cartPanel {
    position: fixed; top: 0; right: 0; width: 360px; height: 100vh; background:#111; color:#fff;
    transform: translateX(100%); transition: transform .25s ease; z-index: 1100;
    box-shadow: -10px 0 30px rgba(0,0,0,.35);
    display: flex; flex-direction: column;
  }
  #cartPanel.show { transform: translateX(0); }
  .cartHeader { padding: 14px 16px; background:#222; display:flex; align-items:center; justify-content:space-between; }
  .cartBody { padding: 14px 16px; overflow:auto; flex:1; }
  .cartFooter { padding: 14px 16px; border-top:1px solid #333; background:#181818; }
  .btn { border:none; border-radius:8px; padding:10px 14px; cursor:pointer; font-weight:700; }
  .btn-primary { background:#2e7d32; color:#fff; }
  .btn-light { background:#eee; color:#111; }
</style>
</head>
<body>

<!-- Ikona koszyka (bez produktÃ³w przykÅ‚adowych) -->
<div id="cartIcon" title="OtwÃ³rz koszyk">ğŸ›’<span class="count" id="cartCount">0</span></div>

<!-- Panel koszyka -->
<div id="cartPanel" aria-hidden="true">
  <div class="cartHeader">
    <strong>TwÃ³j koszyk</strong>
    <button class="btn btn-light" id="closeCart">Zamknij</button>
  </div>
  <div class="cartBody">
    <div id="cartEmpty" style="color:#bbb">Koszyk jest pusty.</div>
    <div id="cartItems"></div>
  </div>
  <div class="cartFooter">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
      <strong>Suma:</strong>
      <strong><span id="total">0</span> zÅ‚</strong>
    </div>
    <div id="paypal-container-L4639S4363CZE" class="paypal-btn"></div>
    <button id="sendMail" class="btn btn-primary" style="width:100%;margin-top:10px">WyÅ›lij zamÃ³wienie mailem</button>
  </div>
</div>

<!-- GÅ‚Ã³wna karta "Koszyk" (zgodnie z Twoim szkieletem) -->
<div class="koszyk">
  <h2>TwÃ³j Koszyk</h2>
  <p><strong>ÅÄ…cznie: <span id="totalMirror">0</span> zÅ‚</strong></p>
  <button id="sendMailMirror">WyÅ›lij zamÃ³wienie mailem</button>
</div>

<script>
  // ======== Minimalny, dynamiczny koszyk (bez Å¼adnych przykÅ‚adowych produktÃ³w) ========
  let cart = []; // {name, price, qty}

  // UI refs
  const cartIcon = document.getElementById('cartIcon');
  const cartPanel = document.getElementById('cartPanel');
  const closeCartBtn = document.getElementById('closeCart');
  const cartItemsEl = document.getElementById('cartItems');
  const cartEmptyEl = document.getElementById('cartEmpty');
  const cartCountEl = document.getElementById('cartCount');
  const totalEl = document.getElementById('total');
  const totalMirrorEl = document.getElementById('totalMirror');

  function toggleCart(show) {
    if (typeof show === 'boolean') {
      cartPanel.classList.toggle('show', show);
      cartPanel.setAttribute('aria-hidden', show ? 'false' : 'true');
    } else {
      const isOpen = cartPanel.classList.contains('show');
      cartPanel.classList.toggle('show', !isOpen);
      cartPanel.setAttribute('aria-hidden', isOpen ? 'true' : 'false');
    }
  }

  cartIcon.addEventListener('click', () => toggleCart(true));
  closeCartBtn.addEventListener('click', () => toggleCart(false));

  function updateTotals() {
    const total = cart.reduce((s,i)=> s + i.price * i.qty, 0);
    totalEl.textContent = total.toFixed(2);
    totalMirrorEl.textContent = total.toFixed(2);
    cartCountEl.textContent = cart.reduce((s,i)=> s + i.qty, 0);
    cartEmptyEl.style.display = cart.length ? 'none' : 'block';
    return total;
  }

  function renderCart() {
    cartItemsEl.innerHTML = '';
    cart.forEach((item, idx) => {
      const row = document.createElement('div');
      row.style.cssText = 'display:flex;justify-content:space-between;align-items:center;background:#222;padding:8px;border-radius:8px;margin-bottom:8px;';
      row.innerHTML = `
        <div>
          <div style="font-weight:700">${item.name}</div>
          <div style="color:#bbb;font-size:13px">${item.price.toFixed(2)} zÅ‚ Ã— ${item.qty}</div>
        </div>
        <div>
          <button class="btn btn-light" data-act="dec" data-idx="${idx}">-</button>
          <button class="btn btn-light" data-act="inc" data-idx="${idx}">+</button>
          <button class="btn btn-light" data-act="del" data-idx="${idx}">UsuÅ„</button>
        </div>
      `;
      cartItemsEl.appendChild(row);
    });
    updateTotals();
  }

  cartItemsEl.addEventListener('click', (e) => {
    const btn = e.target.closest('button[data-act]');
    if (!btn) return;
    const act = btn.dataset.act;
    const idx = Number(btn.dataset.idx);
    if (Number.isNaN(idx) || !cart[idx]) return;

    if (act === 'inc') cart[idx].qty++;
    if (act === 'dec') cart[idx].qty = Math.max(1, cart[idx].qty - 1);
    if (act === 'del') cart.splice(idx, 1);
    renderCart();
  });

  // ====== PUBLICZNA FUNKCJA: wywoÅ‚uj z dowolnego miejsca/produktu ======
  // window.addToCart("Nazwa produktu", 123.45)
  window.addToCart = function(name, price) {
    const p = Number(price);
    if (!name || !Number.isFinite(p)) return;
    const found = cart.find(i => i.name === name && i.price === p);
    if (found) found.qty++;
    else cart.push({ name, price: p, qty: 1 });
    renderCart();
  };

  // ====== Delegacja: przycisk .add-to-cart (data-name, data-price) â€“ bez dodawania przykÅ‚adÃ³w ======
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.add-to-cart');
    if (!btn) return;
    const name = btn.getAttribute('data-name') || 'Produkt';
    const price = parseFloat(btn.getAttribute('data-price') || '0');
    if (!Number.isFinite(price)) return;
    window.addToCart(name, price);
    toggleCart(true);
  });

  // ====== Mail (oba przyciski: w panelu i w sekcji gÅ‚Ã³wnej) ======
  function sendMail() {
    const lines = cart.length
      ? cart.map(i => `${i.name} Ã— ${i.qty} = ${(i.price*i.qty).toFixed(2)} zÅ‚`).join('\n')
      : 'Koszyk pusty.';
    const total = updateTotals().toFixed(2);
    const body = `ZamÃ³wienie:\n\n${lines}\n\nSuma: ${total} zÅ‚`;
    // PodmieÅ„ na swÃ³j adres:
    const mail = 'twÃ³jemail@domena.com';
    window.location.href = `mailto:${mail}?subject=ZamÃ³wienie&body=${encodeURIComponent(body)}`;
  }
  document.getElementById('sendMail').addEventListener('click', sendMail);
  document.getElementById('sendMailMirror').addEventListener('click', sendMail);

  // ====== PayPal Hosted Button (staÅ‚y) ======
  paypal.HostedButtons({
    hostedButtonId: "L4639S4363CZE",
  }).render("#paypal-container-L4639S4363CZE");

  // Start
  renderCart();
</script>

</body>
</html></html>ğŸ¯ GÅÃ“WNY BANER Z ANIMACJÄ„ I ZÅOTYMI DETALAMI -->
<section class="relative h-screen w-full overflow-hidden flex flex-col justify-between font-[Georgia]">
  <!-- Napis nad banerem -->
  <div class="z-20 text-center pt-6 px-4 animate-fade-down">
    <h2 class="text-xl md:text-3xl font-bold text-yellow-400 drop-shadow-[0_0_10px_#d4af37] border border-yellow-400 rounded-lg inline-block px-4 py-2 bg-black bg-opacity-50">
      To nie produkt, To lustro. Gotowy zobaczyÄ‡, co w nim jest
    </h2>
  </div>

  <!-- Obraz banera -->
  <div class="relative flex-1">
    <img src="https://i.ibb.co/Z1VjqzN8/Messenger-creation-C3-B74628-A8-E4-4293-B46-D-754-D2-C97-F8-CC.jpg"
         alt="Baner gÅ‚Ã³wny"
         class="absolute inset-0 w-full h-full object-cover object-center opacity-90 transition-transform duration-1000 ease-out hover:scale-105 md:hover:scale-110">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="absolute inset-0 flex flex-col justify-center items-center text-center px-6 animate-fade-up">
      <h1 class="text-4xl md:text-6xl font-extrabold text-yellow-300 drop-shadow-[0_0_15px_#d4af37] border-b-2 border-yellow-500 pb-2">
        Adelbertus Shop
      </h1>
      <p class="mt-4 text-xl md:text-2xl text-gray-200 font-medium max-w-2xl drop-shadow-md">
        
      </p>
    </div>
  </div>

  <!-- Napis pod banerem -->
  <div class="z-20 text-center pb-6 px-4 animate-fade-up">
    <h3 class="text-lg md:text-2xl font-semibold text-yellow-200 drop-shadow-[0_0_10px_#d4af37] border border-yellow-400 rounded-lg inline-block px-4 py-2 bg-black bg-opacity-50">
      KaÅ¼dy moÅ¼e kupiÄ‡, ale nie kaÅ¼dy zrozumie.
    </h3>
  </div>
</section>

<!-- Animacje CSS -->
<style>
@keyframes fadeDown { 
  0% { opacity: 0; transform: translateY(-30px); } 
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fadeUp { 
  0% { opacity: 0; transform: translateY(30px); } 
  100% { opacity: 1; transform: translateY(0); }
}
.animate-fade-down { animation: fadeDown 1.5s ease forwards; }
.animate-fade-up { animation: fadeUp 1.5s ease forwards; }
<!-- ====================== SKLEP PREMIUM ====================== -->
<section id="sklep" class="py-16 bg-[#0a0a0a] text-white">
  <div class="max-w-7xl mx-auto px-6">
    <!-- ZÅ‚oty nagÅ‚Ã³wek -->
    <div class="text-center mb-16">
      <div class="inline-block relative">
        <h2 class="text-5xl font-bold text-[#d4af37] mb-4 relative z-10">EXCLUSIVE COLLECTION</h2>
        <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent"></div>
      </div>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto mt-6">
        Odkryj naszÄ… limitowanÄ… kolekcjÄ™ premium - poÅ‚Ä…czenie luksusu i streetwearu
      </p>
    </div>

    <!-- Kategorie -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
      <!-- Unisex Collection -->
  <div class="relative group overflow-hidden rounded-xl border-2 border-[#d4af37] bg-gradient-to-br from-[#1a1a1a] to-[#2a2a2a] transition-all duration-500 hover:shadow-[0_0_30px_rgba(212,175,55,0.3)]">
        <div class="p-8 text-center">
          <h3 class="text-3xl font-bold text-[#d4af37] mb-6">UNISEX</h3>
          <div class="space-y-4">
            <a href="#koszulki" class="block text-lg font-medium text-white hover:text-[#d4af37] transition-colors">Koszulki - 120 zÅ‚</a>
            <a href="#bluzy" class="block text-lg font-medium text-white hover:text-[#d4af37] transition-colors">Bluzy - 200 zÅ‚</a>
            <a href="#bluzy-kaptur" class="block text-lg font-medium text-white hover:text-[#d4af37] transition-colors">Bluzy z kapturem - 220 zÅ‚</a>
            <a href="#czapki" class="block text-lg font-medium text-white hover:text-[#d4af37] transition-colors">Czapki - 99 zÅ‚</a>
          </div>
        </div>
      </div>

      <!-- NowoÅ›ci -->
      <div class="relative group overflow-hidden rounded-xl border-2 border-[#d4af37] bg-gradient-to-br from-[#1a1a1a] to-[#2a2a2a] transition-all duration-500 hover:shadow-[0_0_30px_rgba(212,175,55,0.3)]">
        <div class="p-8 text-center">
          <h3 class="text-3xl font-bold text-[#d4af37] mb-6">NEW ARRIVALS</h3>
          <p class="text-gray-400 italic">NadchodzÄ…ce premiery...</p>
          <div class="mt-6">
            <div class="bg-gray-700 h-48 rounded-lg flex items-center justify-center">
              <span class="text-gray-500">Coming Soon</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Projektuj sam -->
      <div class="relative group overflow-hidden rounded-xl border-2 border-[#d4af37] bg-gradient-to-br from-[#1a1a1a] to-[#2a2a2a] transition-all duration-500 hover:shadow-[0_0_30px_rgba(212,175,55,0.3)]">
        <div class="p-8 text-center">
          <h3 class="text-3xl font-bold text-[#d4af37] mb-6">CUSTOM DESIGN</h3>
          <a href="#projektuj" class="block text-lg font-medium text-white hover:text-[#d4af37] transition-colors mb-6">
            Zaprojektuj wÅ‚asny produkt
          </a>
          <div class="bg-gray-700 h-48 rounded-lg flex items-center justify-center">
            <span class="text-gray-500">Design Studio</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== KOSZULKI ==================== -->
    <div id="koszulki" class="py-10">
      <div class="border-b-2 border-[#d4af37] pb-4 mb-10">
        <h3 class="text-4xl font-bold text-[#d4af37]">KOSZULKI</h3>
        <p class="text-gray-400">Limitowana kolekcja premium - 120 zÅ‚</p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
        <!-- Produkt 1 -->
        <div class="group relative bg-[#1e1e1e] rounded-xl overflow-hidden border border-[#333] hover:border-[#d4af37] transition-all duration-300">
          <div class="relative overflow-hidden">
            <img src="https://i.ibb.co/dXSNgRp/Messenger-creation-78-FBFCA7-7344-4-B0-F-BE56-AB8-DD33-C051-C.jpg" 
                 alt="Koszulka Rebel" 
                 class="w-full h-80 object-cover transition-transform duration-500 group-hover:scale-105">
          </div>
          <div class="p-6">
            <h4 class="text-xl font-bold mb-2">Koszulka "Rebel"</h4>
            <p class="text-[#d4af37] font-medium mb-4">120 zÅ‚</p>
            
            <div class="mb-4">
              <label class="block text-gray-400 mb-2">Rozmiar:</label>
              <select class="w-full bg-[#2a2a2a] border border-[#444] text-white rounded px-4 py-2">
                <option>S</option>
                <option>M</option>
                <option>L</option>
                <option>XL</option>
              </select>
            </div>
            
            <div class="mb-6">
              <label class="block text-gray-400 mb-2">Kolor:</label>
              <select class="w-full bg-[#2a2a2a] border border-[#444] text-white rounded px-4 py-2">
                <option>Czarny</option>
                <option>BiaÅ‚y</option>
                <option>ZÅ‚oty</option>
              </select>
            </div>
            
            <button onclick="addToCart('Koszulka Rebel', 120)" 
                    class="w-full bg-[#d4af37] hover:bg-[#c9a227] text-black font-bold py-3 rounded transition-colors duration-300">
              Dodaj do koszyka
            </button>
          </div>
        </div>

        <!-- Produkt 2 -->
        <div class="group relative bg-[#1e1e1e] rounded-xl overflow-hidden border border-[#333] hover:border-[#d4af37] transition-all duration-300">
          <div class="relative overflow-hidden">
            <img src="https://i.ibb.co/wNJNHvkn/Screenshot-20250522-191944-Chat-GPT.jpg" 
                 alt="Koszulka Classic" 
                 class="w-full h-80 object-cover transition-transform duration-500 group-hover:scale-105">
          </div>
          <div class="p-6">
            <h4 class="text-xl font-bold mb-2">Koszulka "Classic"</h4>
            <p class="text-[#d4af37] font-medium mb-4">120 zÅ‚</p>
            
            <div class="mb-4">
              <label class="block text-gray-400 mb-2">Rozmiar:</label>
              <select class="w-full bg-[#2a2a2a] border border-[#444] text-white rounded px-4 py-2">
                <option>S</option>
                <option>M</option>
                <option>L</option>
                <option>XL</option>
              </select>
            </div>
            
            <div class="mb-6">
              <label class="block text-gray-400 mb-2">Kolor:</label>
              <select class="w-full bg-[#2a2a2a] border border-[#444] text-white rounded px-4 py-2">
                <option>Czarny</option>
                <option>BiaÅ‚y</option>
                <option>ZÅ‚oty</option>
              </select>
            </div>
            
            <button onclick="addToCart('Koszulka Classic', 120)" 
                    class="w-full bg-[#d4af37] hover:bg-[#c9a227] text-black font-bold py-3 rounded transition-colors duration-300">
              Dodaj do koszyka
            </button>
          </div>
        </div>
        
        <!-- Dodaj wiÄ™cej produktÃ³w w podobnym stylu -->
      </div>
    </div>
  </div>
</section>
<!-- ====================== ZAPROJEKTUJ ====================== -->
<section id="projektuj" class="py-16 bg-[#0a0a0a] text-white">
  <div class="max-w-7xl mx-auto px-6">
    <div class="text-center mb-16">
      <div class="inline-block relative">
        <h2 class="text-5xl font-bold text-[#d4af37] mb-4 relative z-10">CUSTOM DESIGN</h2>
        <div class="absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent"></div>
      </div>
      <p class="text-xl text-gray-300 max-w-3xl mx-auto mt-6">
        Zaprojektuj wÅ‚asny produkt i dodaj go do koszyka
      </p>
    </div>

    <canvas id="podgladProdukt" width="500" height="500" class="mx-auto block border border-gray-600 rounded-lg mb-6"></canvas>

    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <input id="projektTekst" type="text" placeholder="TwÃ³j tekst" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
      <select id="czcionka" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
        <option value="Arial">Arial</option>
        <option value="Verdana">Verdana</option>
        <option value="Times New Roman">Times New Roman</option>
      </select>
      <input id="rozmiarTekstu" type="number" value="36" min="10" max="100" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
      <input id="kolorTekstu" type="color" value="#000000" class="w-12 h-12 p-0 border-0">
      <input id="kolorProduktu" type="color" value="#ffffff" class="w-12 h-12 p-0 border-0">
      <input id="projektGrafika" type="file" accept="image/*" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
      <select id="umiejscowienie" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
        <option value="front">PrzÃ³d</option>
        <option value="back">TyÅ‚</option>
        <option value="top">GÃ³ra</option>
        <option value="bottom">DÃ³Å‚</option>
      </select>
      <select id="projektRozmiar" class="px-4 py-2 rounded bg-[#1a1a1a] text-white">
        <option value="XS">XS</option>
        <option value="S">S</option>
        <option value="M" selected>M</option>
        <option value="L">L</option>
        <option value="XL">XL</option>
        <option value="XXL">XXL</option>
      </select>
    </div>

    <div class="flex flex-wrap justify-center gap-4 mb-6">
      <button id="przodBtn" class="px-4 py-2 bg-[#d4af37] text-black rounded font-bold">PrzÃ³d</button>
      <button id="tylBtn" class="px-4 py-2 bg-[#d4af37] text-black rounded font-bold">TyÅ‚</button>
    </div>

    <!-- >>> TwÃ³j wymagany przycisk dokÅ‚adnie jak podaÅ‚eÅ› <<< -->
    <div class="flex justify-center gap-4 mt-4">
      <button id="dodajProjektDoKoszyka" 
              class="bg-[#d4af37] hover:bg-[#c9a227] text-black font-bold py-3 px-6 rounded transition-colors duration-300">
        Dodaj do koszyka
      </button>
    </div>
  </div>
</section>

<script>
(() => {
  const canvas = document.getElementById('podgladProdukt');
  const ctx = canvas.getContext('2d');

  const btnPrzod = document.getElementById('przodBtn');
  const btnTyl = document.getElementById('tylBtn');
  const inputTekst = document.getElementById('projektTekst');
  const selectCzcionka = document.getElementById('czcionka');
  const rangeRozmiar = document.getElementById('rozmiarTekstu');
  const inputKolorTekstu = document.getElementById('kolorTekstu');
  const inputKolorProduktu = document.getElementById('kolorProduktu');
  const fileGrafika = document.getElementById('projektGrafika');
  const selectUmiejscowienie = document.getElementById('umiejscowienie');
  const selectRozmiar = document.getElementById('projektRozmiar');

  let currentView = 'front';
  // projekt zawiera pola uÅ¼ywane pÃ³Åºniej w Twoim handlerze (umiejscowienie, rozmiarProdukt)
  let projektPrzod = { tekst:'', czcionka:'Arial', rozmiar:36, kolorTekstu:'#000000', kolorProduktu:'#ffffff', grafikaDataUrl:null, textX:250, textY:250, umiejscowienie:'front', rozmiarProdukt:'M' };
  let projektTyl   = { ...projektPrzod };

  let drag = { active:false, offsetX:0, offsetY:0 };

  function getActiveProject(){ return currentView === 'front' ? projektPrzod : projektTyl; }
  function loadProjectToControls(){
    const p = getActiveProject();
    inputTekst.value = p.tekst;
    selectCzcionka.value = p.czcionka;
    rangeRozmiar.value = p.rozmiar;
    inputKolorTekstu.value = p.kolorTekstu;
    inputKolorProduktu.value = p.kolorProduktu;
    selectUmiejscowienie.value = p.umiejscowienie || 'front';
    selectRozmiar.value = p.rozmiarProdukt || 'M';
  }
  function saveControlsToProject(){
    const p = getActiveProject();
    p.tekst = inputTekst.value;
    p.czcionka = selectCzcionka.value;
    p.rozmiar = parseInt(rangeRozmiar.value, 10);
    p.kolorTekstu = inputKolorTekstu.value;
    p.kolorProduktu = inputKolorProduktu.value;
    p.umiejscowienie = selectUmiejscowienie.value;
    p.rozmiarProdukt = selectRozmiar.value;
  }
  function switchView(view){ currentView = view; loadProjectToControls(); rysujProdukt(); }

  fileGrafika.addEventListener('change', e => {
    const f = e.target.files[0]; if(!f) return;
    const reader = new FileReader();
    reader.onload = ev => { getActiveProject().grafikaDataUrl = ev.target.result; rysujProdukt(); };
    reader.readAsDataURL(f);
  });

  [inputTekst, selectCzcionka, rangeRozmiar, inputKolorTekstu, inputKolorProduktu, selectUmiejscowienie, selectRozmiar]
    .forEach(el => el.addEventListener('input', () => { saveControlsToProject(); rysujProdukt(); }));

  btnPrzod.addEventListener('click', () => switchView('front'));
  btnTyl.addEventListener('click', () => switchView('back'));

  canvas.addEventListener('mousedown', e => {
    const p = getActiveProject(); const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left; const y = e.clientY - rect.top;
    if(p.tekst){
      drag.active = true; drag.offsetX = x - p.textX; drag.offsetY = y - p.textY; canvas.style.cursor = 'grabbing';
    }
  });
  canvas.addEventListener('mousemove', e => {
    if(!drag.active) return;
    const p = getActiveProject(); const rect = canvas.getBoundingClientRect();
    p.textX = e.clientX - rect.left - drag.offsetX; p.textY = e.clientY - rect.top - drag.offsetY;
    rysujProdukt();
  });
  canvas.addEventListener('mouseup',   () => { drag.active = false; canvas.style.cursor=''; });
  canvas.addEventListener('mouseleave',() => { drag.active = false; canvas.style.cursor=''; });

  function rysujProdukt(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const p = getActiveProject();
    // proste â€ciaÅ‚oâ€ produktu
    ctx.fillStyle = p.kolorProduktu; ctx.strokeStyle = '#333'; ctx.lineWidth = 3;
    ctx.fillRect(110,70,280,360); ctx.strokeRect(110,70,280,360);

    if(p.grafikaDataUrl){
      const img = new Image();
      img.onload = () => { ctx.drawImage(img, 150, 150, 200, 200); drawTextOver(p); };
      img.src = p.grafikaDataUrl;
    } else {
      drawTextOver(p);
    }
  }
  function drawTextOver(p){
    if(!p.tekst) return;
    ctx.font = `${p.rozmiar}px ${p.czcionka}`;
    ctx.fillStyle = p.kolorTekstu;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(p.tekst, p.textX, p.textY);
  }

  loadProjectToControls();
  rysujProdukt();

  /* ====== TWÃ“J DOKÅADNY HANDLER â€“ wklejony bez zmian ====== */
  document.getElementById('dodajProjektDoKoszyka').addEventListener('click', () => {
    saveControlsToProject(); // zapisuje aktualny stan projektu
    const projekt = getActiveProject();
    const canvasData = document.getElementById('podgladProdukt').toDataURL('image/png');
    
    const basePrice = 120;
    const sizePrices = { XS:0, S:0, M:0, L:2, XL:4, XXL:6 };
    const price = basePrice + (sizePrices[projekt.rozmiarProdukt] || 0);

    addToCart(
      `TwÃ³j projekt (${projekt.rozmiarProdukt})`,
      price,
      canvasData,
      {
        tekst: projekt.tekst,
        czcionka: projekt.czcionka,
        kolorTekstu: projekt.kolorTekstu,
        kolorProduktu: projekt.kolorProduktu,
        grafika: projekt.grafikaDataUrl,
        umiejscowienie: projekt.umiejscowienie
      }
    );

    alert('Projekt dodany do koszyka!');
  });
})();
</script>  
      id="zbiorka" class="py-16 bg-gradient-to-br from-yellow-50 to-yellow-100">
  <div class="max-w-5xl mx-auto px-6 relative bg-white p-8 rounded-3xl border-8 border-yellow-400 shadow-2xl
              ring-4 ring-yellow-300 ring-opacity-70 hover:ring-opacity-100 transition duration-500">
    
    <!-- Ramka dekoracyjna -->
    <div class="absolute inset-0 rounded-3xl border-4 border-double border-yellow-500 pointer-events-none z-10"></div>
    <div class="absolute -inset-3 rounded-4xl border-8 border-yellow-300 opacity-40 blur-lg pointer-events-none z-0"></div>

    <!-- NagÅ‚Ã³wek -->
    <h2 class="relative text-4xl font-extrabold text-gray-900 mb-4 text-center z-20">ğŸ“¦ ZbiÃ³rka na Dom Dziecka</h2>
    <p class="relative text-lg text-gray-700 text-center mb-6 z-20">
      PomÃ³Å¼my razem dzieciom, ktÃ³re czekajÄ… na odrobinÄ™ ciepÅ‚a, radoÅ›ci i poczucia, Å¼e sÄ… waÅ¼ne.  
      Twoja pomoc moÅ¼e odmieniÄ‡ ich dzieÅ„, a nawet caÅ‚e Å¼ycie.
    </p>

    <!-- Dane kontaktowe -->
    <div class="relative bg-yellow-50 p-4 rounded-xl shadow-md mb-6 text-center border border-yellow-300 z-20">
      <p class="font-bold text-lg text-gray-800">ğŸ“± Przelew BLIK: <span class="text-yellow-700">573-939-925</span></p>
      <p class="text-gray-800">ğŸ“§ E-mail: <a href="mailto:mielniczukgrzegosz74@gmail.com" class="text-blue-600 underline">mielniczukgrzegosz74@gmail.com</a></p>
      <p class="text-gray-800">ğŸ“ Kontakt: 604-296-360</p>
      <p class="text-sm italic text-gray-600">Po przelewie lub chÄ™ci wysyÅ‚ki darÃ³w â€” skontaktuj siÄ™ z nami, podamy adres.</p>
    </div>

    <!-- Lista darczyÅ„cÃ³w -->
    <div class="relative mb-6 z-20">
      <h3 class="text-2xl font-bold text-gray-900 mb-3">â¤ï¸ Ostatni darczyÅ„cy</h3>
      <ul class="space-y-2 text-gray-700">
        <li>ğŸ <strong>Anna K.</strong> â€” paczka z ksiÄ…Å¼kami i pluszakami</li>
        <li>ğŸ <strong>Jan M.</strong> â€” 10 ciepÅ‚ych kurtek zimowych</li>
        <li>ğŸ <strong>Magdalena S.</strong> â€” karton sÅ‚odyczy i gier planszowych</li>
        <li>ğŸ <strong>Piotr L.</strong> â€” 5 plecakÃ³w szkolnych</li>
      </ul>
    </div>

    <!-- Licznik do wysyÅ‚ki -->
    <div class="relative mb-8 text-center z-20">
      <h3 class="text-xl font-semibold text-gray-900 mb-2">â³ NastÄ™pna wysyÅ‚ka paczek za:</h3>
      <p id="countdown" class="text-3xl font-bold text-yellow-700"></p>
    </div>

    <!-- List od dzieci -->
    <div class="relative bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded-lg shadow-md mb-8 z-20">
      <p class="italic text-gray-800">
        â€DziÄ™kujemy z caÅ‚ego serca za paczki, ktÃ³re od Was dostajemy.  
        KaÅ¼dy koc, zabawka, ksiÄ…Å¼ka czy sÅ‚odycz jest dla nas jak prezent od losu.  
        Kiedy widzimy, Å¼e ktoÅ› o nas pamiÄ™ta, czujemy siÄ™ potrzebni i kochani.  
        MoÅ¼e nie moÅ¼emy siÄ™ Wam odwdziÄ™czyÄ‡ tym samym, ale obiecujemy, Å¼e dobro, ktÃ³re nam dajecie, bÄ™dziemy przekazywaÄ‡ dalej w Å¼yciu.  
        DziÄ™kujemy, Å¼e jesteÅ›cie naszymi AnioÅ‚ami.â€
      </p>
      <p class="mt-3 text-right font-bold text-gray-900">â€” Dzieci z Domu Dziecka</p>
    </div>

    <!-- Twoje przesÅ‚anie -->
    <p class="relative text-center text-gray-700 italic z-20">
      Jako byÅ‚y wychowanek domu dziecka wiem, jak wiele znaczy taka pomoc.  
      Dlatego kaÅ¼de wsparcie jest dla mnie osobistÄ… misjÄ…. â€” <strong>Wojciech</strong>
    </p>

  </div>
</section>

<!-- Skrypt licznika -->
<script>
  function startCountdown() {
    const targetDate = new Date();
    targetDate.setDate(targetDate.getDate() + 7); // Za 7 dni
    function updateCountdown() {
      const now = new Date();
      const diff = targetDate - now;
      if (diff <= 0) {
        document.getElementById('countdown').innerText = "DziÅ› wysyÅ‚amy paczki! â¤ï¸";
        return;
      }
      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((diff / (1000 * 60)) % 60);
      document.getElementById('countdown').innerText = `${days} dni, ${hours} godz., ${minutes} min.`;
    }
    updateCountdown();
    setInterval(updateCountdown, 1000);
  }
  startCountdown();
</script>  

<section id="artysta" class="py-12 bg-gradient-to-br from-gray-50 to-gray-100">
  <div class="max-w-4xl mx-auto relative p-8 bg-white rounded-2xl border-8 border-yellow-500 shadow-lg">
    <h2 class="text-3xl font-extrabold text-gray-900 mb-4 text-center">Artysta</h2>
    <p class="mb-4 text-gray-800 leading-relaxed">
      Mam na imiÄ™ <strong>Wojciech</strong> i caÅ‚e Å¼ycie jestem zwiÄ…zany ze sztukÄ…. Kocham jÄ… od najmÅ‚odszych lat, choÄ‡ jestem samoukiem. TworzÄ™ portrety realistyczne, peÅ‚ne detali, malujÄ™ obrazy, wykonujÄ™ tatuaÅ¼e oraz zajmujÄ™ siÄ™ grafikÄ….
    </p>
    <p class="mb-4 text-gray-800 leading-relaxed">
      DzielÄ™ siÄ™ sztukÄ… z ludÅºmi, bo widzÄ™, jak ich serca rozÅ›wietla moment, gdy otrzymujÄ… portret, koszulkÄ™ czy cokolwiek z obrazem. Wtedy na ich twarzach pojawia siÄ™ uÅ›miech â€” a to wÅ‚aÅ›nie sztuka daje radoÅ›Ä‡.
    </p>
    <p class="mb-4 text-gray-800 leading-relaxed">
      Dla mnie najpiÄ™kniejszÄ… czÄ™Å›ciÄ… pracy artysty jest to, Å¼e mogÄ™ wywoÅ‚aÄ‡ ten uÅ›miech na czyjejÅ› twarzy.
    </p>
    <p class="text-gray-800 leading-relaxed italic text-center">
      Pozdrawiam serdecznie â€” w swoim imieniu oraz caÅ‚ego zespoÅ‚u <strong>AdelbertusShop</strong>.
    </p>
  </div>
</section>  
          
      <section id="regulamin" class="py-16 px-6 bg-gradient-to-br from-[#faf5ee] to-[#fdf8f0] font-serif text-[#2e1e0f]">
  <div class="max-w-5xl mx-auto relative bg-white shadow-2xl rounded-3xl p-10 border-4 border-yellow-500">

    <!-- Zdobiona ramka -->
    <div class="absolute inset-0 rounded-3xl border-8 border-double border-yellow-400 pointer-events-none z-10"></div>
    <div class="absolute -inset-2 rounded-[2rem] border-4 border-yellow-300 blur-md opacity-50 z-0"></div>

    <!-- Etykieta -->
    <div class="absolute -top-5 left-1/2 transform -translate-x-1/2 bg-[#fdf8f0] px-6 py-1 text-[#caa25b] font-bold text-lg tracking-widest shadow-md rounded-md border border-[#caa25b] uppercase z-20">
      âœ§ REGULAMIN âœ§
    </div>

    <!-- NagÅ‚Ã³wek -->
    <div class="relative z-20">
      <h2 class="text-4xl font-bold mb-12 text-center text-[#2e1e0f] underline decoration-[#caa25b]/50">Regulamin sklepu AdelbertusShop</h2>

      <div class="space-y-10 text-[17px] leading-relaxed">
        
        <!-- Â§1 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ“œ</span> Â§1 Postanowienia ogÃ³lne
          </h3>
          <p>Sklep internetowy <strong>AdelbertusShop</strong> dziaÅ‚a pod adresem [tu wstaw adres] i prowadzony jest przez osobÄ™ fizycznÄ… wykonujÄ…cÄ… dziaÅ‚alnoÅ›Ä‡ nierejestrowanÄ… na podstawie art. 5 ust. 1 ustawy Prawo przedsiÄ™biorcÃ³w.</p>
          <p>Kontakt: [adres e-mail], [numer telefonu â€“ opcjonalnie]</p>
          <p>Podstawy prawne: Kodeks cywilny, Ustawa o prawach konsumenta, Prawo przedsiÄ™biorcÃ³w.</p>
        </div>

        <!-- Â§2 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ“–</span> Â§2 Definicje
          </h3>
          <ul class="list-disc pl-6 space-y-1">
            <li><strong>Sprzedawca</strong> â€“ osoba fizyczna prowadzÄ…ca dziaÅ‚alnoÅ›Ä‡ nierejestrowanÄ….</li>
            <li><strong>Klient</strong> â€“ osoba fizyczna dokonujÄ…ca zakupu.</li>
            <li><strong>Konsument</strong> â€“ klient, ktÃ³ry nie dziaÅ‚a w ramach dziaÅ‚alnoÅ›ci gospodarczej.</li>
            <li><strong>Towar</strong> â€“ produkt oferowany w sklepie.</li>
            <li><strong>Umowa zawarta na odlegÅ‚oÅ›Ä‡</strong> â€“ umowa zawarta przez internet.</li>
          </ul>
        </div>

        <!-- Â§3 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ›’</span> Â§3 Warunki sprzedaÅ¼y
          </h3>
          <p>Ceny towarÃ³w podawane sÄ… w zÅ‚otych polskich i sÄ… cenami brutto. Koszt dostawy jest wskazywany przy zamÃ³wieniu. ZamÃ³wienia sÄ… przyjmowane poprzez stronÄ™ sklepu. Umowa zostaje zawarta z chwilÄ… klikniÄ™cia â€Zamawiamâ€.</p>
        </div>

        <!-- Â§4 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ’³</span> Â§4 PÅ‚atnoÅ›Ä‡ i dostawa
          </h3>
          <ul class="list-disc pl-6 space-y-1">
            <li>PÅ‚atnoÅ›Ä‡: przelew, BLIK, inne â€“ ustalane indywidualnie.</li>
            <li>ZamÃ³wienia realizowane sÄ… po zaksiÄ™gowaniu wpÅ‚aty.</li>
            <li>Dostawa na terenie Polski â€“ kurier, paczkomat.</li>
            <li>Czas realizacji: do 7 dni roboczych (chyba Å¼e ustalono inaczej).</li>
          </ul>
        </div>

        <!-- Â§5 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>â†©ï¸</span> Â§5 OdstÄ…pienie od umowy
          </h3>
          <ul class="list-disc pl-6 space-y-1">
            <li>Konsument ma prawo odstÄ…piÄ‡ od umowy w ciÄ…gu 14 dni.</li>
            <li>Zwrot kosztÃ³w nastÄ™puje do 14 dni po zwrocie towaru.</li>
            <li>Produkty personalizowane nie podlegajÄ… zwrotowi.</li>
          </ul>
        </div>

        <!-- Â§6 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ› ï¸</span> Â§6 Reklamacje
          </h3>
          <p>Reklamacje przyjmowane sÄ… drogÄ… mailowÄ…. Klient powinien doÅ‚Ä…czyÄ‡ opis problemu i zdjÄ™cie. Sprzedawca odpowiada w ciÄ…gu 14 dni. W przypadku uznania reklamacji â€“ produkt jest wymieniany, naprawiany lub zwracane sÄ… pieniÄ…dze.</p>
        </div>

        <!-- Â§7 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ”</span> Â§7 Dane osobowe
          </h3>
          <p>Dane osobowe przetwarzane sÄ… zgodnie z RODO wyÅ‚Ä…cznie w celu realizacji zamÃ³wienia. Klient ma prawo wglÄ…du, poprawienia lub usuniÄ™cia swoich danych.</p>
        </div>

        <!-- Â§8 -->
        <div>
          <h3 class="font-semibold text-2xl mb-3 text-[#5c3d15] flex items-center gap-2">
            <span>ğŸ“Œ</span> Â§8 Postanowienia koÅ„cowe
          </h3>
          <p>Regulamin obowiÄ…zuje od momentu opublikowania na stronie. Sprzedawca zastrzega sobie prawo do zmian. W sprawach nieuregulowanych zastosowanie majÄ… przepisy prawa polskiego.</p>
        </div>

      </div>
    </div>
  </div>
</section>    
</main> <!-- JeÅ›li masz otwarte <main>, zamykamy je wczeÅ›niej -->

<!-- ğŸ”» START: BODY I DOLNA SEKCJA Z BANEREM I PRZYCISKIEM POWROTU ğŸ”» -->
<body>
  <section class="bg-black text-white py-4 px-6 flex flex-col md:flex-row items-center justify-between gap-4 border-t border-gray-700">
    <div class="text-center md:text-left">
      <p class="text-lg font-semibold">ğŸ”¥ Zaprojektuj coÅ› swojego. WyrÃ³Å¼nij siÄ™!</p>
      <p class="text-sm text-gray-300">Kliknij u gÃ³ry w sekcjÄ™ â€Zaprojektujâ€ i stwÃ³rz coÅ› niepowtarzalnego.</p>
    </div>
    <button onclick="scrollToTop()" class="bg-white text-black px-4 py-2 rounded-full hover:bg-gray-200 transition">
      â¬†ï¸ Do gÃ³ry
    </button>
  </section>

  <script>
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init('26es87U-rjUzsUtV7'); // TwÃ³j klucz EmailJS

// WspÃ³lny koszyk dla caÅ‚ej strony
window.__CART__ = window.__CART__ || [];

// ======================= FUNKCJE KOSZYKA =======================
function addToCart(name, price, imageUrl = null, payload = null){
  const sizeSelect = document.querySelector('#projektRozmiar') || document.querySelector('select'); // jeÅ›li produkt ze sklepu
  const size = sizeSelect?.value || 'M';
  window.__CART__.push({
    name, price, imageUrl, payload, qty:1,
    id: Date.now()+Math.random().toString(16).slice(2),
    size
  });
  updateCartUI();
  const notification = document.createElement('div');
  notification.className='fixed bottom-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg animate-bounce';
  notification.textContent='Dodano do koszyka!';
  document.body.appendChild(notification);
  setTimeout(()=>notification.remove(),3000);
}

function updateCartUI(){
  const lista=document.getElementById('listaKoszyka');
  const sumaEl=document.getElementById('sumaKoszyka');
  if(!lista){
    const cartContainer = document.createElement('div');
    cartContainer.id = 'koszykGlobalny';
    cartContainer.className = 'fixed top-16 right-4 bg-[#1a1a1a] p-4 rounded-lg w-72 shadow-lg z-50';
    cartContainer.innerHTML = `<h4 class="text-[#d4af37] font-bold mb-2">Koszyk</h4>
                               <ul id="listaKoszyka" class="list-none p-0 mb-2"></ul>
                               <div id="sumaKoszyka" class="font-bold text-lg">0 zÅ‚</div>
                               <button id="wyczyscKoszyk" class="w-full bg-[#d4af37] text-black py-2 rounded mt-2">WyczyÅ›Ä‡ koszyk</button>`;
    document.body.appendChild(cartContainer);
    document.getElementById('wyczyscKoszyk').addEventListener('click',()=>{
      window.__CART__=[];
      updateCartUI();
    });
  }

  lista.innerHTML='';
  let suma=0;
  window.__CART__.forEach(item=>{
    const li=document.createElement('li');
    li.className='flex justify-between items-center py-2 border-b border-gray-700';
    li.innerHTML=`${item.imageUrl?`<img src="${item.imageUrl}" width="40">`:""} ${item.name} ${item.price.toFixed(2)} zÅ‚ X ${item.qty} (${item.size})`;
    lista.appendChild(li);
    suma+=item.price*item.qty;
  });
  sumaEl.textContent=suma.toFixed(2)+' zÅ‚';
}

// ======================= CANVAS & DRAG&DROP =======================
(() => {
  const canvas=document.getElementById('podgladProdukt');
  const ctx=canvas.getContext('2d');

  const btnPrzod=document.getElementById('przodBtn');
  const btnTyl=document.getElementById('tylBtn');
  const inputTekst=document.getElementById('projektTekst');
  const selectCzcionka=document.getElementById('czcionka');
  const rangeRozmiar=document.getElementById('rozmiarTekstu');
  const inputKolorTekstu=document.getElementById('kolorTekstu');
  const inputKolorProduktu=document.getElementById('kolorProduktu');
  const fileGrafika=document.getElementById('projektGrafika');

  let currentView='front';
  let projektPrzod={tekst:'',czcionka:'Arial',rozmiar:36,kolorTekstu:'#000',kolorProduktu:'#fff',grafikaDataUrl:null,textX:250,textY:250};
  let projektTyl={...projektPrzod};
  let drag={active:false,offsetX:0,offsetY:0};

  function getActiveProject(){return currentView==='front'?projektPrzod:projektTyl;}
  function loadProjectToControls(){
    const p=getActiveProject();
    inputTekst.value=p.tekst;
    selectCzcionka.value=p.czcionka;
    rangeRozmiar.value=p.rozmiar;
    inputKolorTekstu.value=p.kolorTekstu;
    inputKolorProduktu.value=p.kolorProduktu;
  }
  function saveControlsToProject(){
    const p=getActiveProject();
    p.tekst=inputTekst.value;
    p.czcionka=selectCzcionka.value;
    p.rozmiar=parseInt(rangeRozmiar.value,10);
    p.kolorTekstu=inputKolorTekstu.value;
    p.kolorProduktu=inputKolorProduktu.value;
  }
  function switchView(view){currentView=view; loadProjectToControls(); rysujProdukt();}

  fileGrafika.addEventListener('change',e=>{
    const f=e.target.files[0]; if(!f) return;
    const reader=new FileReader();
    reader.onload=ev=>{getActiveProject().grafikaDataUrl=ev.target.result;rysujProdukt();}
    reader.readAsDataURL(f);
  });

  [inputTekst,selectCzcionka,rangeRozmiar,inputKolorTekstu,inputKolorProduktu].forEach(el=>el.addEventListener('input',()=>{saveControlsToProject();rysujProdukt();}));
  btnPrzod.addEventListener('click',()=>switchView('front'));
  btnTyl.addEventListener('click',()=>switchView('back'));

  canvas.addEventListener('mousedown',e=>{
    const p=getActiveProject(); const rect=canvas.getBoundingClientRect();
    const x=e.clientX-rect.left; const y=e.clientY-rect.top;
    if(p.tekst){drag.active=true;drag.offsetX=x-p.textX;drag.offsetY=y-p.textY;canvas.style.cursor='grabbing';}
  });
  canvas.addEventListener('mousemove',e=>{
    if(!drag.active) return; const p=getActiveProject();
    const rect=canvas.getBoundingClientRect();
    p.textX=e.clientX-rect.left-drag.offsetX; p.textY=e.clientY-rect.top-drag.offsetY;
    rysujProdukt();
  });
  canvas.addEventListener('mouseup',()=>{drag.active=false;canvas.style.cursor='';});
  canvas.addEventListener('mouseleave',()=>{drag.active=false;canvas.style.cursor='';});

  function rysujProdukt(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const p=getActiveProject();
    ctx.fillStyle=p.kolorProduktu; ctx.strokeStyle='#333'; ctx.lineWidth=3;
    ctx.fillRect(110,70,280,360); ctx.strokeRect(110,70,280,360);
    if(p.grafikaDataUrl){const img=new Image(); img.onload=()=>{ctx.drawImage(img,150,150,200,200); drawTextOver(p);}; img.src=p.grafikaDataUrl;} else drawTextOver(p);
  }
  function drawTextOver(p){if(!p.tekst) return; ctx.font=`${p.rozmiar}px ${p.czcionka}`; ctx.fillStyle=p.kolorTekstu; ctx.textAlign='center'; ctx.textBaseline='middle'; ctx.fillText(p.tekst,p.textX,p.textY);}
  loadProjectToControls(); rysujProdukt();
})();

// Dodawanie zaprojektowanego produktu do wspÃ³lnego koszyka
document.getElementById('dodajDoKoszyka').addEventListener('click',()=>{
  const name=document.getElementById('projektTekst').value||'Produkt';
  addToCart(name,49.99);
});

// Aktualizacja koszyka po zaÅ‚adowaniu strony (jeÅ›li juÅ¼ sÄ… produkty)
updateCartUI();
</script></body>
</html>
<!-- ğŸ”º KONIEC KODU ğŸ”º -->



























































































































